# 🚀 本地开发指南

## 快速开始

### 1. 启动本地服务器
```bash
# 使用优化的本地服务器（推荐）
npm run dev

# 或使用 serve 包
npm run dev:serve
```

### 2. 访问地址
- **本地访问**: http://localhost:3000
- **网络访问**: http://0.0.0.0:3000

## 🔧 故障排除

### 问题：响应时间过长

#### 解决方案 1：清除浏览器缓存
1. 打开浏览器开发者工具 (F12)
2. 右键点击刷新按钮
3. 选择"清空缓存并硬性重新加载"

#### 解决方案 2：检查端口占用
```bash
# 检查端口 3000 是否被占用
lsof -i :3000

# 如果被占用，杀死进程
kill -9 <PID>
```

#### 解决方案 3：使用不同端口
```bash
# 设置自定义端口
PORT=8080 npm run dev
```

#### 解决方案 4：检查防火墙设置
- 确保本地防火墙允许端口 3000
- 检查杀毒软件是否阻止了本地服务器

### 问题：JSON 文件加载失败

#### 解决方案 1：重新压缩 JSON 文件
```bash
npm run compress
```

#### 解决方案 2：检查文件权限
```bash
# 确保 JSON 文件可读
chmod 644 *.json
```

#### 解决方案 3：验证 JSON 格式
```bash
npm run verify
```

## 📊 性能监控

### 浏览器开发者工具
1. 打开 Network 标签页
2. 刷新页面
3. 查看加载时间和错误信息

### 控制台日志
- 查看加载时间信息
- 检查错误信息
- 监控数据加载状态

## 🛠️ 开发工具

### 可用的脚本命令
```bash
npm run dev          # 启动优化的本地服务器
npm run dev:serve    # 启动 serve 服务器
npm run compress     # 压缩 JSON 文件
npm run verify       # 验证项目配置
npm run build        # 构建项目
```

### 文件结构
```
cloud-nodes-map/
├── index.html                           # 主页面
├── scripts/
│   ├── dev-server.js                    # 本地开发服务器
│   ├── compress.js                      # JSON 压缩脚本
│   └── verify.js                        # 项目验证脚本
├── *.json                              # 数据文件
└── package.json                        # 项目配置
```

## 🌐 部署对比

| 环境 | 地址 | 状态 |
|------|------|------|
| 本地开发 | http://localhost:3000 | 需要手动启动 |
| Vercel 生产 | https://cloud-nodes-map.vercel.app/ | 自动部署 |

## 💡 开发提示

1. **热重载**: 修改文件后刷新浏览器即可看到更新
2. **错误处理**: 如果数据加载失败，会自动使用默认数据
3. **性能优化**: 本地服务器已配置缓存和压缩
4. **调试模式**: 打开浏览器控制台查看详细日志

## 🔍 常见问题

### Q: 为什么本地加载比生产环境慢？
A: 本地环境没有 CDN 加速，这是正常现象。生产环境使用 Vercel 的全球 CDN。

### Q: 如何调试数据加载问题？
A: 打开浏览器控制台，查看 Network 标签页和 Console 日志。

### Q: 本地服务器启动失败怎么办？
A: 检查端口是否被占用，或使用 `PORT=8080 npm run dev` 指定其他端口。 